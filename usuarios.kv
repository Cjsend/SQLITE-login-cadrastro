#:kivy 2.3.0

GerenciadorTelas:
    Login:
    Cadastro:
    Listagem:
    Edicao:
    BoasVindas:

<Login>:
    name: "login"
    email_input: email
    senha_input: senha
    mensagem_label: mensagem

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        Label:
            text: "Login"
            font_size: 24
            size_hint_y: 0.2

        TextInput:
            id: email
            hint_text: "Email"
            multiline: False

        TextInput:
            id: senha
            hint_text: "Senha"
            password: True
            multiline: False

        Button:
            text: "Entrar"
            on_release: root.login()

        Button:
            text: "Cadastrar"
            on_release: root.ir_para_cadastro()

        Button:
            text: "Resetar Senha"
            on_release: app.resetar_senha(email.text, senha.text)

        Label:
            id: mensagem
            text: ""
            color: 1,0,0,1

<Cadastro>:
    name: "cadastro"
    nome: nome
    email: email
    senha: senha
    senha_confirma: senha_confirma
    mensagem_label: mensagem

    BoxLayout:
        orientation: "vertical"
        TextInput:
            id: nome
            hint_text: "Nome"
        TextInput:
            id: email
            hint_text: "Email"
        TextInput:
            id: senha
            hint_text: "Senha"
            password: True
        TextInput:
            id: senha_confirma
            hint_text: "Confirmar Senha"
            password: True
        Button:
            text: "Cadastrar"
            on_release: root.cadastrar()
        Label:
            id: mensagem
            text: ""

<Listagem>:
    name: "listagem"
    lista: lista
    busca_input: busca
    mensagem_label: mensagem

    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 10

        BoxLayout:
            size_hint_y: 0.1
            TextInput:
                id: busca
                hint_text: "Buscar usuário..."
                multiline: False
            Button:
                text: "Buscar"
                on_release: root.buscar()
            Button:
                text: "Ordenar por Nome"
                on_release: app.listar_usuarios("nome")
            Button:
                text: "Ordenar por Email"
                on_release: app.listar_usuarios("email")

        GridLayout:
            id: lista
            cols: 3
            size_hint_y: 0.8

        Button:
            text: "Voltar"
            size_hint_y: 0.1
            on_release: app.root.current = "boasvindas"

        Label:
            id: mensagem
            text: ""
            color: 1,0,0,1

<Edicao>:
    name: "edicao"
    nome_input: nome
    email_input: email
    senha_input: senha
    mensagem_label: mensagem

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        Label:
            text: "Editar Usuário"
            font_size: 24
            size_hint_y: 0.2

        TextInput:
            id: nome
            hint_text: "Nome"
            multiline: False

        TextInput:
            id: email
            hint_text: "Email"
            multiline: False

        TextInput:
            id: senha
            hint_text: "Nova Senha (opcional)"
            password: True
            multiline: False

        Button:
            text: "Salvar"
            on_release: root.salvar()

        Button:
            text: "Voltar"
            on_release: app.root.current = "listagem"

        Label:
            id: mensagem
            text: ""
            color: 1,0,0,1

<BoasVindas>:
    name: "boasvindas"
    label_boas_vindas: boas

    BoxLayout:
        orientation: "vertical"
        padding: 20
        spacing: 10

        Label:
            id: boas
            text: "Bem-vindo!"
            font_size: 24

        Button:
            text: "Listar Usuários"
            on_release: app.root.current = "listagem"

        Button:
            text: "Sair"
            on_release: app.root.current = "login"
